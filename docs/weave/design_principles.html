<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Basic String Operations" href="basic_operations.html" /><link rel="prev" title="Installing stringi" href="../install.html" />
        <link rel="canonical" href="https://stringi.gagolewski.com/weave/design_principles.html" />

    <link rel="shortcut icon" href="https://www.gagolewski.com/_static/img/stringi.png"/><!-- Generated with Sphinx 7.2.5 and Furo 2023.08.19 -->
        <title>General Design Principles - R Package stringi</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=dd03ec4f" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 95%;
  --admonition-title-font-size: 95%;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --admonition-font-size: 95%;
  --admonition-title-font-size: 95%;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --admonition-font-size: 95%;
  --admonition-title-font-size: 95%;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">R Package stringi</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto colour theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky">
<div class="sidebar-logo-container">
  <a class="sidebar-brand" href="../index.html"><img class="sidebar-logo" src="https://www.gagolewski.com/_static/img/stringi.png" alt="Logo"/></a>
</div>

<span class="sidebar-brand-text">
<a class="sidebar-brand" href="../index.html">stringi</a>
</span>
<div class="sidebar-brand">
1.8.1
</div>
<form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">stringi</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">About</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com/">Author</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing <em>stringi</em></a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/stringi">Source Code (GitHub)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/stringi/issues">Bug Tracker and Feature Suggestions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://cran.r-project.org/package=stringi">CRAN Entry</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">General Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_operations.html">Basic String Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="codepoint_comparing.html">Code-Pointwise Comparing</a></li>
<li class="toctree-l1"><a class="reference internal" href="regular_expressions.html">Regular Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="collation.html">Collation</a></li>
<li class="toctree-l1"><a class="reference internal" href="other_operations.html">Other Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_output.html">Input and Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="example.html">Example Use Case: Data Preparation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Manual</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../rapi.html">R Package <em>stringi</em> Reference</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of R Package stringi Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../rapi/about_arguments.html">about_arguments:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/about_encoding.html">about_encoding:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/about_locale.html">about_locale:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/about_search_boundaries.html">about_search_boundaries:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/about_search_charclass.html">about_search_charclass:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/about_search_coll.html">about_search_coll:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/about_search_fixed.html">about_search_fixed:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/about_search_regex.html">about_search_regex:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/about_search.html">about_search: String Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/about_stringi.html">about_stringi: Fast and Portable Character String Processing in R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/operator_add.html">operator_add: Concatenate Two Character Vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/operator_compare.html">operator_compare: Compare Strings with or without Collation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/operator_dollar.html">operator_dollar: as a Binary Operator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_compare.html">stri_compare: Compare Strings with or without Collation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_count_boundaries.html">stri_count_boundaries: Count the Number of Text Boundaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_count.html">stri_count: Count the Number of Pattern Occurrences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_datetime_add.html">stri_datetime_add: Date and Time Arithmetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_datetime_create.html">stri_datetime_create: Create a Date-Time Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_datetime_fields.html">stri_datetime_fields: Get Values for Date and Time Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_datetime_format.html">stri_datetime_format: Date and Time Formatting and Parsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_datetime_fstr.html">stri_datetime_fstr: -Style Format Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_datetime_now.html">stri_datetime_now: Get Current Date and Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_datetime_symbols.html">stri_datetime_symbols: List Localizable Date-Time Formatting Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_detect.html">stri_detect: Detect Pattern Occurrences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_dup.html">stri_dup: Duplicate Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_duplicated.html">stri_duplicated: Determine Duplicated Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_detect.html">stri_enc_detect: Detect Character Set and Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_detect2.html">stri_enc_detect2: [DEPRECATED] Detect Locale-Sensitive Character Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_fromutf32.html">stri_enc_fromutf32: Convert From UTF-32</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_info.html">stri_enc_info: Query a Character Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_isascii.html">stri_enc_isascii: Check If a Data Stream Is Possibly in ASCII</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_isutf16.html">stri_enc_isutf16: Check If a Data Stream Is Possibly in UTF-16 or UTF-32</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_isutf8.html">stri_enc_isutf8: Check If a Data Stream Is Possibly in UTF-8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_list.html">stri_enc_list: List Known Character Encodings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_mark.html">stri_enc_mark: Get Declared Encodings of Each String</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_set.html">stri_enc_set:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_toascii.html">stri_enc_toascii: Convert To ASCII</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_tonative.html">stri_enc_tonative: Convert Strings To Native Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_toutf32.html">stri_enc_toutf32: Convert Strings To UTF-32</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_enc_toutf8.html">stri_enc_toutf8: Convert Strings To UTF-8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_encode.html">stri_encode: Convert Strings Between Given Encodings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_escape_unicode.html">stri_escape_unicode: Escape Unicode Code Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_extract_boundaries.html">stri_extract_boundaries: Extract Data Between Text Boundaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_extract.html">stri_extract: Extract Pattern Occurrences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_flatten.html">stri_flatten: Flatten a String</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_info.html">stri_info:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_isempty.html">stri_isempty: Determine if a String is of Length Zero</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_join_list.html">stri_join_list: Concatenate Strings in a List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_join.html">stri_join: Concatenate Character Vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_length.html">stri_length: Count the Number of Code Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_list2matrix.html">stri_list2matrix: Convert a List to a Character Matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_locale_info.html">stri_locale_info: Query Given Locale</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_locale_list.html">stri_locale_list: List Available Locales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_locale_set.html">stri_locale_set:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_locate_boundaries.html">stri_locate_boundaries: Locate Text Boundaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_locate.html">stri_locate: Locate Pattern Occurrences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_match.html">stri_match: Extract Regex Pattern Matches, Together with Capture Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_na2empty.html">stri_na2empty: Replace NAs with Empty Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_numbytes.html">stri_numbytes: Count the Number of Bytes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_opts_brkiter.html">stri_opts_brkiter: Generate a List with BreakIterator Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_opts_collator.html">stri_opts_collator: Generate a List with Collator Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_opts_fixed.html">stri_opts_fixed: Generate a List with Fixed Pattern Search Engine’s Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_opts_regex.html">stri_opts_regex: Generate a List with Regex Matcher Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_order.html">stri_order: Ordering Permutation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_pad.html">stri_pad: Pad (Center/Left/Right Align) a String</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_rand_lipsum.html">stri_rand_lipsum: A Lorem Ipsum Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_rand_shuffle.html">stri_rand_shuffle: Randomly Shuffle Code Points in Each String</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_rand_strings.html">stri_rand_strings: Generate Random Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_rank.html">stri_rank: Ranking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_read_lines.html">stri_read_lines: Read Text Lines from a Text File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_read_raw.html">stri_read_raw: Read Text File as Raw</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_remove_empty.html">stri_remove_empty: Remove All Empty Strings from a Character Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_replace_na.html">stri_replace_na: Replace Missing Values in a Character Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_replace_rstr.html">stri_replace_rstr: Convert gsub-Style Replacement Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_replace.html">stri_replace: Replace Pattern Occurrences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_reverse.html">stri_reverse: Reverse Each String</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_sort_key.html">stri_sort_key: Sort Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_sort.html">stri_sort: String Sorting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_split_boundaries.html">stri_split_boundaries: Split a String at Text Boundaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_split_lines.html">stri_split_lines: Split a String Into Text Lines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_split.html">stri_split: Split a String By Pattern Matches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_sprintf.html">stri_sprintf: Format Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_startsendswith.html">stri_startsendswith: Determine if the Start or End of a String Matches a Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_stats_general.html">stri_stats_general: General Statistics for a Character Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_stats_latex.html">stri_stats_latex: Statistics for a Character Vector Containing LaTeX Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_sub_all.html">stri_sub_all: Extract or Replace Multiple Substrings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_sub.html">stri_sub: Extract a Substring From or Replace a Substring In a Character Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_subset.html">stri_subset: Select Elements that Match a Given Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_timezone_info.html">stri_timezone_info: Query a Given Time Zone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_timezone_list.html">stri_timezone_list: List Available Time Zone Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_timezone_set.html">stri_timezone_set:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_trans_casemap.html">stri_trans_casemap: Transform Strings with Case Mapping or Folding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_trans_char.html">stri_trans_char: Translate Characters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_trans_general.html">stri_trans_general: General Text Transforms, Including Transliteration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_trans_list.html">stri_trans_list: List Available Text Transforms and Transliterators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_trans_nf.html">stri_trans_nf: Perform or Check For Unicode Normalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_trim.html">stri_trim: Trim Characters from the Left and/or Right Side of a String</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_unescape_unicode.html">stri_unescape_unicode: Un-escape All Escape Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_unique.html">stri_unique: Extract Unique Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_width.html">stri_width: Determine the Width of Code Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_wrap.html">stri_wrap: Word Wrap Text to Format Paragraphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapi/stri_write_lines.html">stri_write_lines: Write Text Lines to a Text File</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://deepr.gagolewski.com/">Deep R Programming</a></li>
<li class="toctree-l1"><a class="reference external" href="https://stringx.gagolewski.com/">stringx</a></li>
<li class="toctree-l1"><a class="reference external" href="https://dx.doi.org/10.18637/jss.v103.i02">JStatSoft Paper</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/ExampleRcppStringi">C++ API — Rcpp Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../news.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../z_bibliography.html">References</a></li>
</ul>

</div></div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/gagolews/stringi/issues/" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto colour theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="general-design-principles">
<h1>General Design Principles<a class="headerlink" href="#general-design-principles" title="Link to this heading">#</a></h1>
<blockquote>
<div><p>This tutorial is based on the <a class="reference external" href="https://dx.doi.org/10.18637/jss.v103.i02">paper on <em>stringi</em></a> that was published in the <em>Journal of Statistical Software</em>; see <span id="id1">[<a class="reference internal" href="../z_bibliography.html#id3" title="Gagolewski, M. (2022).  stringi: Fast and portable character string processing in R. Journal of Statistical Software, 103(2):1–59. DOI: 10.18637/jss.v103.i02.">2</a>]</span>. To learn more about R, check out Marek’s open-access (free!) textbook <a class="reference external" href="https://deepr.gagolewski.com/"><em>Deep R Programming</em></a> <span id="id2">[<a class="reference internal" href="../z_bibliography.html#id4" title="Gagolewski, M. (2023).  Deep R Programming. Zenodo, Melbourne. ISBN 978-0-6455719-2-9. URL: https://deepr.gagolewski.com/, DOI: 10.5281/zenodo.7490464.">3</a>]</span>.</p>
</div></blockquote>
<p>The API of the early releases of <em>stringi</em> has been designed to be
fairly compatible with that of the 0.6.2 version of the <a class="reference external" href="https://stringr.tidyverse.org/"><em>stringr</em></a>
package <span id="id3">[<a class="reference internal" href="../z_bibliography.html#id12" title="Wickham, H. (2010).  stringr: Modern, consistent string processing. The R Journal, 2(2):38–40.">11</a>]</span> (dated 2012<a class="footnote-reference brackets" href="#footstringr" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>),
with some fixes in the consistency of the
handling of missing values and zero-length vectors, amongst others.
However, instead of being merely thin wrappers around base R<a class="footnote-reference brackets" href="#footstringx" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> functions,
which we have identified as not necessarily portable across platforms
and not really suitable for natural language processing tasks, all the
functionality has been implemented from the ground up, with the use of
<a class="reference external" href="https://icu.unicode.org/"><em>ICU</em></a> services wherever applicable.
Since the initial release, an
abundance of new features has been added, and the package can now be
considered a complete workhorse for text data processing.</p>
<p>Note that
the <em>stringi</em> API is stable. Future releases will aim for as much
backward compatibility as possible so that other software projects can
safely rely on it.</p>
<section id="naming">
<h2>Naming<a class="headerlink" href="#naming" title="Link to this heading">#</a></h2>
<p>Function and argument names use a combination of lowercase letters and
underscores (and no dots). To avoid namespace clashes, all function
names feature the “<code class="docutils literal notranslate"><span class="pre">stri_</span></code>” prefix. Names are quite self-explanatory,
e.g., <code class="docutils literal notranslate"><span class="pre">stri_locate_first_regex</span></code> and <code class="docutils literal notranslate"><span class="pre">stri_locate_all_fixed</span></code> find,
respectively, the first match to a regular expression and all
occurrences of a substring as-is.</p>
</section>
<section id="vectorisation">
<h2>Vectorisation<a class="headerlink" href="#vectorisation" title="Link to this heading">#</a></h2>
<p>Individual character (or code point) strings can be entered using double
quotes or apostrophes:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;spam&quot;</span><span class="w">  </span><span class="c1"># or &#39;spam&#39;</span>
<span class="c1">## [1] &quot;spam&quot;</span>
</pre></div>
</div>
<p>However, as the R language does not feature any classical scalar types,
strings are wrapped around atomic vectors of type “<code class="docutils literal notranslate"><span class="pre">character</span></code>”:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">typeof</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># object type; see also is.character() and is.vector()</span>
<span class="c1">## [1] &quot;character&quot;</span>
<span class="nf">length</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># how many strings are in this vector?</span>
<span class="c1">## [1] 1</span>
</pre></div>
</div>
<p>Hence, we will be using the terms “string” and “character vector of
length 1” interchangeably.</p>
<p>Not having a separate scalar type is very convenient; the so-called
<em>vectorisation</em> strategy encourages writing code that processes whole
collections of objects, all at once, regardless of their size.</p>
<p>For instance, given the following character vector:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">pythons</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;Graham Chapman&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;John Cleese&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Terry Gilliam&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;Eric Idle&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Terry Jones&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Michael Palin&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>we can separate the first and the last names from each other (assuming
for simplicity that no middle names are given), using just a single
function call:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">pythons</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">stri_split_fixed</span><span class="p">(</span><span class="n">pythons</span><span class="p">,</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">simplify</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
<span class="c1">##      [,1]      [,2]     </span>
<span class="c1">## [1,] &quot;Graham&quot;  &quot;Chapman&quot;</span>
<span class="c1">## [2,] &quot;John&quot;    &quot;Cleese&quot; </span>
<span class="c1">## [3,] &quot;Terry&quot;   &quot;Gilliam&quot;</span>
<span class="c1">## [4,] &quot;Eric&quot;    &quot;Idle&quot;   </span>
<span class="c1">## [5,] &quot;Terry&quot;   &quot;Jones&quot;  </span>
<span class="c1">## [6,] &quot;Michael&quot; &quot;Palin&quot;</span>
</pre></div>
</div>
<p>Due to vectorisation, we can generally avoid using the <code class="docutils literal notranslate"><span class="pre">for</span></code>- and
<code class="docutils literal notranslate"><span class="pre">while</span></code>-loops (“for each string in a vector…”). This can make the code
much more readable, maintainable, and faster to execute.</p>
</section>
<section id="acting-elementwise-with-recycling">
<h2>Acting Elementwise with Recycling<a class="headerlink" href="#acting-elementwise-with-recycling" title="Link to this heading">#</a></h2>
<p>Binary and higher-arity operations in R are oftentimes vectorised with
respect to all arguments (or at least to the crucial, non-optional
ones). As a prototype, let’s consider the binary arithmetic, logical,
or comparison operators (and, to some extent, <code class="docutils literal notranslate"><span class="pre">paste()</span></code>, <code class="docutils literal notranslate"><span class="pre">strrep()</span></code>, and
more generally <code class="docutils literal notranslate"><span class="pre">mapply()</span></code>), for example the multiplication:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">c</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">-1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w">  </span><span class="c1"># == c(10, -1, 10, -1) * c(1, 2, 3, 4)</span>
<span class="c1">## [1] 10 -2 30 -4</span>
</pre></div>
</div>
<p>Calling “<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span></code>” multiplies the corresponding components of the two
vectors elementwisely. As one operand happens to be shorter than
the other, the former is recycled as many times as necessary to match the
length of the latter (there would be a warning if partial recycling
occurred). Also, acting on a zero-length input always yields an empty
vector.</p>
<p>All functions in <em>stringi</em> follow this convention (with some obvious
exceptions, such as the <code class="docutils literal notranslate"><span class="pre">collapse</span></code> argument in <code class="docutils literal notranslate"><span class="pre">stri_join()</span></code>, <code class="docutils literal notranslate"><span class="pre">locale</span></code>
in <code class="docutils literal notranslate"><span class="pre">stri_datetime_parse()</span></code>, etc.). In particular, all string search
functions are vectorised with respect to both the <code class="docutils literal notranslate"><span class="pre">haystack</span></code> and the
<code class="docutils literal notranslate"><span class="pre">needle</span></code> arguments (and, e.g., the replacement string, if applicable).</p>
<p>Some users, unaware of this rule, might find this behaviour unintuitive
at the beginning and thus miss out on how powerful it is. Therefore, let’s
enumerate the most noteworthy scenarios that are possible thanks to
the arguments’ recycling, using the call to
<code class="docutils literal notranslate"><span class="pre">stri_count_fixed(haystack,</span> <span class="pre">needle)</span></code> (which looks for a needle in a
haystack) as an illustration:</p>
<ul>
<li><p>many strings – one pattern:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">stri_count_fixed</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;abcd&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;abcabc&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;abdc&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;dab&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;abc&quot;</span><span class="p">)</span>
<span></span><span class="c1">## [1]  1  2  0  0 NA</span>
</pre></div>
</div>
<p>(there is 1 occurrence of <code class="docutils literal notranslate"><span class="pre">&quot;abc&quot;</span></code> in <code class="docutils literal notranslate"><span class="pre">&quot;abcd&quot;</span></code>,
2 in <code class="docutils literal notranslate"><span class="pre">&quot;abcabc&quot;</span></code>, and so forth);</p>
</li>
<li><p>one string – many patterns:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">stri_count_fixed</span><span class="p">(</span><span class="s">&quot;abcdeabc&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;def&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bc&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;abc&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">))</span>
<span></span><span class="c1">## [1]  0  2  2 NA</span>
</pre></div>
</div>
<p>(<code class="docutils literal notranslate"><span class="pre">&quot;def&quot;</span></code> does not occur in <code class="docutils literal notranslate"><span class="pre">&quot;abcdeabc&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;bc&quot;</span></code> can be found therein twice, etc.);</p>
</li>
<li><p>each string – its own corresponding pattern:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">stri_count_fixed</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;abca&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;def&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ghi&quot;</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;z&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;h&quot;</span><span class="p">))</span>
<span></span><span class="c1">## [1] 2 0 1</span>
</pre></div>
</div>
<p>(there are two <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code>s in <code class="docutils literal notranslate"><span class="pre">&quot;abca&quot;</span></code>,
no <code class="docutils literal notranslate"><span class="pre">&quot;z&quot;</span></code> in <code class="docutils literal notranslate"><span class="pre">&quot;def&quot;</span></code>, and one <code class="docutils literal notranslate"><span class="pre">&quot;h&quot;</span></code> in <code class="docutils literal notranslate"><span class="pre">&quot;ghi&quot;</span></code>);</p>
</li>
<li><p>each row in a matrix – its own corresponding pattern:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">haystack</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">matrix</span><span class="p">(</span><span class="w">  </span><span class="c1"># example input</span>
<span class="nf">do.call</span><span class="p">(</span><span class="n">stri_join</span><span class="p">,</span>
<span class="w">    </span><span class="nf">expand.grid</span><span class="p">(</span>
<span class="w">    </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">)),</span><span class="w"> </span><span class="n">nrow</span><span class="o">=</span><span class="m">3</span><span class="p">))</span>
<span></span><span class="c1">##      [,1]  [,2]  [,3]  [,4]  [,5]  [,6]  [,7]  [,8]  [,9] </span>
<span class="c1">## [1,] &quot;aaa&quot; &quot;aba&quot; &quot;aca&quot; &quot;aab&quot; &quot;abb&quot; &quot;acb&quot; &quot;aac&quot; &quot;abc&quot; &quot;acc&quot;</span>
<span class="c1">## [2,] &quot;baa&quot; &quot;bba&quot; &quot;bca&quot; &quot;bab&quot; &quot;bbb&quot; &quot;bcb&quot; &quot;bac&quot; &quot;bbc&quot; &quot;bcc&quot;</span>
<span class="c1">## [3,] &quot;caa&quot; &quot;cba&quot; &quot;cca&quot; &quot;cab&quot; &quot;cbb&quot; &quot;ccb&quot; &quot;cac&quot; &quot;cbc&quot; &quot;ccc&quot;</span>
<span></span><span class="n">needle</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">)</span>
<span class="nf">matrix</span><span class="p">(</span><span class="nf">stri_count_fixed</span><span class="p">(</span><span class="n">haystack</span><span class="p">,</span><span class="w"> </span><span class="n">needle</span><span class="p">),</span><span class="w">  </span><span class="c1"># call to stringi</span>
<span class="n">nrow</span><span class="o">=</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">dimnames</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="n">needle</span><span class="p">,</span><span class="w"> </span><span class="kc">NULL</span><span class="p">))</span>
<span></span><span class="c1">##   [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]</span>
<span class="c1">## a    3    2    2    2    1    1    2    1    1</span>
<span class="c1">## b    1    2    1    2    3    2    1    2    1</span>
<span class="c1">## c    1    1    2    1    1    2    2    2    3</span>
</pre></div>
</div>
<p>(this looks for <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code> in the 1st row of
<code class="docutils literal notranslate"><span class="pre">haystack</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;b&quot;</span></code> in the 2nd row, and <code class="docutils literal notranslate"><span class="pre">&quot;c&quot;</span></code> in the 3rd;
in particular, there are 3 <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code>s in <code class="docutils literal notranslate"><span class="pre">&quot;aaa&quot;</span></code>, 2 in <code class="docutils literal notranslate"><span class="pre">&quot;aba&quot;</span></code>,
and 1 <code class="docutils literal notranslate"><span class="pre">&quot;b&quot;</span></code> in <code class="docutils literal notranslate"><span class="pre">&quot;baa&quot;</span></code>;
this is possible because matrices are
represented as “flat” vectors of length <code class="docutils literal notranslate"><span class="pre">nrow*ncol</span></code>,
whose elements are read in a column-major (Fortran) order;
therefore, here,
the pattern <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code> is being sought in the 1st, 4th, 7th, …
string in <code class="docutils literal notranslate"><span class="pre">haystack</span></code>, i.e., <code class="docutils literal notranslate"><span class="pre">&quot;aaa&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;aba&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;aca&quot;</span></code>, …;
pattern <code class="docutils literal notranslate"><span class="pre">&quot;b&quot;</span></code> in the 2nd, 5th, 8th, … string;
and <code class="docutils literal notranslate"><span class="pre">&quot;c&quot;</span></code> in the 3rd, 6th, 9th, … one);</p>
<p>On a side note, to match different patterns
with respect to each column, we can (amongst others)
apply matrix transpose twice (<code class="docutils literal notranslate"><span class="pre">t(stri_count_fixed(t(haystack),</span> <span class="pre">needle))</span></code>).</p>
</li>
<li><p>all strings – all patterns:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">haystack</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;aaa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bbb&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ccc&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;abc&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cba&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;aab&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bab&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;acc&quot;</span><span class="p">)</span>
<span class="n">needle</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">)</span>
<span class="nf">structure</span><span class="p">(</span>
<span class="nf">outer</span><span class="p">(</span><span class="n">haystack</span><span class="p">,</span><span class="w"> </span><span class="n">needle</span><span class="p">,</span><span class="w"> </span><span class="n">stri_count_fixed</span><span class="p">),</span>
<span class="n">dimnames</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="n">haystack</span><span class="p">,</span><span class="w"> </span><span class="n">needle</span><span class="p">))</span><span class="w">  </span><span class="c1"># add row and column names</span>
<span></span><span class="c1">##     a b c</span>
<span class="c1">## aaa 3 0 0</span>
<span class="c1">## bbb 0 3 0</span>
<span class="c1">## ccc 0 0 3</span>
<span class="c1">## abc 1 1 1</span>
<span class="c1">## cba 1 1 1</span>
<span class="c1">## aab 2 1 0</span>
<span class="c1">## bab 1 2 0</span>
<span class="c1">## acc 1 0 2</span>
</pre></div>
</div>
<p>(which computes the counts over the Cartesian product
of the two arguments)</p>
<p>This is equivalent to:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">matrix</span><span class="p">(</span>
<span class="nf">stri_count_fixed</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="n">haystack</span><span class="p">,</span><span class="w"> </span><span class="n">each</span><span class="o">=</span><span class="nf">length</span><span class="p">(</span><span class="n">needle</span><span class="p">)),</span><span class="w"> </span><span class="n">needle</span><span class="p">),</span>
<span class="n">byrow</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="o">=</span><span class="nf">length</span><span class="p">(</span><span class="n">needle</span><span class="p">),</span><span class="w"> </span><span class="n">dimnames</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="n">haystack</span><span class="p">,</span><span class="w"> </span><span class="n">needle</span><span class="p">))</span>
<span></span><span class="c1">##     a b c</span>
<span class="c1">## aaa 3 0 0</span>
<span class="c1">## bbb 0 3 0</span>
<span class="c1">## ccc 0 0 3</span>
<span class="c1">## abc 1 1 1</span>
<span class="c1">## cba 1 1 1</span>
<span class="c1">## aab 2 1 0</span>
<span class="c1">## bab 1 2 0</span>
<span class="c1">## acc 1 0 2</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="missing-values">
<h2>Missing Values<a class="headerlink" href="#missing-values" title="Link to this heading">#</a></h2>
<p>Some base R string processing functions, e.g., <code class="docutils literal notranslate"><span class="pre">paste()</span></code>, treat missing
values as literal <code class="docutils literal notranslate"><span class="pre">&quot;NA&quot;</span></code> strings. <em>stringi</em>, however, <em>does</em> enforce the
consistent propagation of missing values (like arithmetic operations):</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="kc">NA_character_</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">)</span><span class="w">  </span><span class="c1"># base R</span>
<span class="c1">## [1] &quot;NA x 1&quot; &quot;b x 2&quot;  &quot;c x 1&quot;</span>
<span class="nf">stri_join</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="kc">NA_character_</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">)</span><span class="w">  </span><span class="c1"># stringi</span>
<span class="c1">## Warning in stri_join(c(NA_character_, &quot;b&quot;, &quot;c&quot;), &quot;x&quot;, 1:2): longer object</span>
<span class="c1">##     length is not a multiple of shorter object length</span>
<span class="c1">## [1] NA    &quot;bx2&quot; &quot;cx1&quot;</span>
</pre></div>
</div>
<p>For dealing with missing values, we may rely on the convenience
functions such as <code class="docutils literal notranslate"><span class="pre">stri_omit_na()</span></code> or <code class="docutils literal notranslate"><span class="pre">stri_replace_na()</span></code>.</p>
</section>
<section id="data-flow">
<h2>Data Flow<a class="headerlink" href="#data-flow" title="Link to this heading">#</a></h2>
<p>All vector-like arguments (including factors and objects) in <em>stringi</em>
are treated in the same manner. For example, if a function expects a
character vector on input and an object of another type is provided,
<code class="docutils literal notranslate"><span class="pre">as.character()</span></code> is called first (we see that in the example above,
“<code class="docutils literal notranslate"><span class="pre">1:2</span></code>” is treated as <code class="docutils literal notranslate"><span class="pre">c(&quot;1&quot;,</span> <span class="pre">&quot;2&quot;)</span></code>).</p>
<p>Following <span id="id6">[<a class="reference internal" href="../z_bibliography.html#id12" title="Wickham, H. (2010).  stringr: Modern, consistent string processing. The R Journal, 2(2):38–40.">11</a>]</span>, <em>stringi</em> makes sure the output data
types are consistent and that different functions are interoperable.
This makes operation chaining easier and less error-prone.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">stri_extract_first_regex()</span></code> finds the first occurrence of
a pattern in each string. Therefore, the output is a character of the
same length as the input (with the recycling rule in place if necessary).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">haystack</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;bacon&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;jam, spam, bacon, and spam&quot;</span><span class="p">)</span>
<span class="nf">stri_extract_first_regex</span><span class="p">(</span><span class="n">haystack</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\\b\\w{1,4}\\b&quot;</span><span class="p">)</span>
<span class="c1">## [1] NA     &quot;spam&quot; &quot;jam&quot;</span>
</pre></div>
</div>
<p>Note that a no-match (here, we have been looking for words of at most 4
characters) is marked with a missing string. This makes the output
vector size consistent with the length of the inputs.</p>
<p>On the other hand, <code class="docutils literal notranslate"><span class="pre">stri_extract_all_regex()</span></code> identifies all occurrences
of a pattern, whose counts may differ from input to input, therefore it
yields a list of character vectors.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">stri_extract_all_regex</span><span class="p">(</span><span class="n">haystack</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\\b\\w{1,4}\\b&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">omit_no_match</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [[1]]</span>
<span class="c1">## character(0)</span>
<span class="c1">## </span>
<span class="c1">## [[2]]</span>
<span class="c1">## [1] &quot;spam&quot;</span>
<span class="c1">## </span>
<span class="c1">## [[3]]</span>
<span class="c1">## [1] &quot;jam&quot;  &quot;spam&quot; &quot;and&quot;  &quot;spam&quot;</span>
</pre></div>
</div>
<p>If the 3rd argument were not specified, a no-match would be represented
by a missing value (for consistency with the previous function).</p>
<p>Also, care is taken so that the “data” or “<code class="docutils literal notranslate"><span class="pre">x</span></code>” argument is most often
listed as the first one (e.g., in base R we have
<code class="docutils literal notranslate"><span class="pre">grepl(needle,</span> <span class="pre">haystack)</span></code> vs <code class="docutils literal notranslate"><span class="pre">stri_detect(haystack,</span> <span class="pre">needle)</span></code> here). This
makes the functions more intuitive to use, but also more forward pipe
operator-friendly (either when using “<code class="docutils literal notranslate"><span class="pre">|&gt;</span></code>” introduced in R 4.1 or
“<code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code>” from <a class="reference external" href="https://magrittr.tidyverse.org/"><em>magrittr</em></a>).</p>
<p>Furthermore, for increased convenience, some functions have been added
despite the fact that they can  trivially be reduced to a series of other
calls. In particular, writing:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">stri_sub_all</span><span class="p">(</span><span class="n">haystack</span><span class="p">,</span>
<span class="w">  </span><span class="nf">stri_locate_all_regex</span><span class="p">(</span><span class="n">haystack</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\\b\\w{1,4}\\b&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">omit_no_match</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
</pre></div>
</div>
<p>yields the same result as in the previous example, but refers to
<code class="docutils literal notranslate"><span class="pre">haystack</span></code> twice.</p>
</section>
<section id="further-deviations-from-base-r">
<h2>Further Deviations from Base R<a class="headerlink" href="#further-deviations-from-base-r" title="Link to this heading">#</a></h2>
<p><em>stringi</em> can be used as a replacement for the existing string processing
functions. Also, it offers many facilities not available in base R.
Except for being fully vectorised with respect to all crucial arguments,
propagating missing values and empty vectors consistently, and following
coherent naming conventions, our functions deviate from their classic
counterparts even further.</p>
<p><strong>Following Unicode Standards.</strong>
Thanks to the comprehensive coverage of the most important services
provided by <em>ICU</em>, its users gain access to collation, pattern
searching, normalisation, transliteration, etc., that follow the current
Unicode standards for text processing in any locale. Due to this, as we
state in <a class="reference internal" href="input_output.html#sec-encoding"><span class="std std-ref">Character Encodings</span></a>, all inputs are converted to Unicode.
Furthermore, all outputs are always in UTF-8.</p>
<p><strong>Portability Issues in Base R.</strong>
As mentioned in the introduction, base R string operations have
traditionally been limited in scope. There also might be some issues
with regards to their portability, reasons for which may be plentiful.
For instance, varied versions of the <a class="reference external" href="https://www.pcre.org/"><em>PCRE</em></a>
(8.x or 10.x) pattern
matching libraries may be linked to during the compilation of R. On
Windows, there is a custom implementation of <em>iconv</em> that has a set of
character encoding IDs not fully compatible with that on GNU/Linux: to
select the Polish locale, we are required to pass <code class="docutils literal notranslate"><span class="pre">&quot;Polish_Poland&quot;</span></code> to
<code class="docutils literal notranslate"><span class="pre">Sys.setlocale()</span></code> on Windows whereas <code class="docutils literal notranslate"><span class="pre">&quot;pl_PL&quot;</span></code> on Linux. Interestingly,
R can be built against the system <em>ICU</em> so that it uses its Collator for
comparing strings (e.g., using the “<code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>” operator). However, this is
only optional and does not provide access to any other Unicode services.</p>
<p>For example, let us consider the matching of “all letters” by means of
the built-in <code class="docutils literal notranslate"><span class="pre">gregexpr()</span></code> function and the <a class="reference external" href="https://github.com/laurikari/tre/"><em>TRE</em></a>
(<code class="docutils literal notranslate"><span class="pre">perl=FALSE</span></code>) and
<em>PCRE</em> (<code class="docutils literal notranslate"><span class="pre">perl=TRUE</span></code>) libraries using a POSIX-like and Unicode-style
character set (see <a class="reference internal" href="regular_expressions.html#sec-regex"><span class="std std-ref">Regular Expressions</span></a> for more details):</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;AEZaezĄĘŻąęż&quot;</span><span class="w">  </span><span class="c1"># &quot;AEZaez\u0104\u0118\u017b\u0105\u0119\u017c&quot;</span>
<span class="nf">stri_sub</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nf">gregexpr</span><span class="p">(</span><span class="s">&quot;[[:alpha:]]&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">perl</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)[[</span><span class="m">1</span><span class="p">]],</span><span class="w"> </span><span class="n">length</span><span class="o">=</span><span class="m">1</span><span class="p">)</span>
<span class="nf">stri_sub</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nf">gregexpr</span><span class="p">(</span><span class="s">&quot;[[:alpha:]]&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)[[</span><span class="m">1</span><span class="p">]],</span><span class="w">  </span><span class="n">length</span><span class="o">=</span><span class="m">1</span><span class="p">)</span>
<span class="nf">stri_sub</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nf">gregexpr</span><span class="p">(</span><span class="s">&quot;\\p{L}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)[[</span><span class="m">1</span><span class="p">]],</span><span class="w">       </span><span class="n">length</span><span class="o">=</span><span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
<p>On Ubuntu Linux 20.04 (UTF-8 locale), the respective outputs are:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## [1] &quot;A&quot; &quot;E&quot; &quot;Z&quot; &quot;a&quot; &quot;e&quot; &quot;z&quot; &quot;Ą&quot; &quot;Ę&quot; &quot;Ż&quot; &quot;ą&quot; &quot;ę&quot; &quot;ż&quot;</span>
<span class="c1">## [1] &quot;A&quot; &quot;E&quot; &quot;Z&quot; &quot;a&quot; &quot;e&quot; &quot;z&quot;</span>
<span class="c1">## [1] &quot;A&quot; &quot;E&quot; &quot;Z&quot; &quot;a&quot; &quot;e&quot; &quot;z&quot; &quot;Ą&quot; &quot;Ę&quot; &quot;Ż&quot; &quot;ą&quot; &quot;ę&quot; &quot;ż&quot;</span>
</pre></div>
</div>
<p>On Windows, when <code class="docutils literal notranslate"><span class="pre">x</span></code> is marked as UTF-8
(see <a class="reference internal" href="input_output.html#sec-encoding"><span class="std std-ref">Character Encodings</span></a>), the current author obtained:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## [1] &quot;A&quot; &quot;E&quot; &quot;Z&quot; &quot;a&quot; &quot;e&quot; &quot;z&quot;</span>
<span class="c1">## [1] &quot;A&quot; &quot;E&quot; &quot;Z&quot; &quot;a&quot; &quot;e&quot; &quot;z&quot;</span>
<span class="c1">## [1] &quot;A&quot; &quot;E&quot; &quot;Z&quot; &quot;a&quot; &quot;e&quot; &quot;z&quot; &quot;Ą&quot; &quot;Ę&quot; &quot;Ż&quot; &quot;ą&quot; &quot;ę&quot; &quot;ż&quot;</span>
</pre></div>
</div>
<p>And again on Windows using the Polish locale but <code class="docutils literal notranslate"><span class="pre">x</span></code> marked as
natively-encoded (CP-1250 in this case):</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## [1] &quot;A&quot; &quot;E&quot; &quot;Z&quot; &quot;a&quot; &quot;e&quot; &quot;z&quot; &quot;Ę&quot; &quot;ę&quot;</span>
<span class="c1">## [1] &quot;A&quot; &quot;E&quot; &quot;Z&quot; &quot;a&quot; &quot;e&quot; &quot;z&quot; &quot;Ą&quot; &quot;Ę&quot; &quot;Ż&quot; &quot;ą&quot; &quot;ę&quot; &quot;ż&quot;</span>
<span class="c1">## [1] &quot;A&quot; &quot;E&quot; &quot;Z&quot; &quot;a&quot; &quot;e&quot; &quot;z&quot; &quot;Ę&quot; &quot;ę&quot;</span>
</pre></div>
</div>
<p>As we mention in <a class="reference internal" href="collation.html#sec-collator"><span class="std std-ref">Collation</span></a>, when <em>stringi</em> links to
<em>ICU</em> built from sources
(<code class="docutils literal notranslate"><span class="pre">install.packages(&quot;stringi&quot;,</span> <span class="pre">configure.args=&quot;--disable-pkg-config&quot;)</span></code>),
we are always guaranteed to get the same results on every platform.</p>
<p><strong>High Performance of <em>stringi</em>.</strong>
Because of the aforementioned reasons, functions in <em>stringi</em> do not
refer to their base R counterparts. The operations that do not rely on
<em>ICU</em> services have been rewritten from scratch with speed and
portability in mind. For example, here are some timings of string
concatenation:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">stri_rand_strings</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="kc">LETTERS</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">1000</span><span class="p">,</span><span class="w"> </span><span class="m">1000</span><span class="p">)</span>
<span class="n">microbenchmark</span><span class="o">::</span><span class="nf">microbenchmark</span><span class="p">(</span>
<span class="w">  </span><span class="n">join2</span><span class="o">=</span><span class="nf">stri_join</span><span class="p">(</span><span class="kc">LETTERS</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">collapse</span><span class="o">=</span><span class="s">&quot;, &quot;</span><span class="p">),</span>
<span class="w">  </span><span class="n">join3</span><span class="o">=</span><span class="nf">stri_join</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kc">LETTERS</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">collapse</span><span class="o">=</span><span class="s">&quot;, &quot;</span><span class="p">),</span>
<span class="w">  </span><span class="n">r_paste2</span><span class="o">=</span><span class="nf">paste</span><span class="p">(</span><span class="kc">LETTERS</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">collapse</span><span class="o">=</span><span class="s">&quot;, &quot;</span><span class="p">),</span>
<span class="w">  </span><span class="n">r_paste3</span><span class="o">=</span><span class="nf">paste</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kc">LETTERS</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">collapse</span><span class="o">=</span><span class="s">&quot;, &quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="c1">## Unit: milliseconds</span>
<span class="c1">##      expr     min      lq    mean  median      uq    max neval</span>
<span class="c1">##     join2  39.153  40.157  54.064  41.688  52.681 109.94   100</span>
<span class="c1">##     join3  84.818  88.149  92.345  90.330  94.587 138.78   100</span>
<span class="c1">##  r_paste2  83.995  87.088 104.517  90.834 105.171 183.10   100</span>
<span class="c1">##  r_paste3 176.490 182.296 228.608 243.960 258.631 343.04   100</span>
</pre></div>
</div>
<p>Another example – timings of fixed pattern searching:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">stri_rand_strings</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">100000</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[actg]&quot;</span><span class="p">)</span>
<span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;acca&quot;</span>
<span class="n">microbenchmark</span><span class="o">::</span><span class="nf">microbenchmark</span><span class="p">(</span>
<span class="w">  </span><span class="n">fixed</span><span class="o">=</span><span class="nf">stri_locate_all_fixed</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">),</span>
<span class="w">  </span><span class="n">regex</span><span class="o">=</span><span class="nf">stri_locate_all_regex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">),</span>
<span class="w">  </span><span class="n">coll</span><span class="o">=</span><span class="nf">stri_locate_all_coll</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">),</span>
<span class="w">  </span><span class="n">r_tre</span><span class="o">=</span><span class="nf">gregexpr</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">),</span>
<span class="w">  </span><span class="n">r_pcre</span><span class="o">=</span><span class="nf">gregexpr</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">),</span>
<span class="w">  </span><span class="n">r_fixed</span><span class="o">=</span><span class="nf">gregexpr</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">fixed</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="p">)</span>
<span class="c1">## Unit: milliseconds</span>
<span class="c1">##     expr      min       lq     mean  median       uq      max neval</span>
<span class="c1">##    fixed   4.9861   5.0658   5.1497   5.088   5.1666   5.4805   100</span>
<span class="c1">##    regex  98.5586  99.1162  99.5049  99.342  99.6874 109.1632   100</span>
<span class="c1">##     coll 261.6454 262.9504 263.4606 263.463 263.9660 265.3722   100</span>
<span class="c1">##    r_tre 117.0878 117.4128 117.8794 117.561 117.7429 127.0573   100</span>
<span class="c1">##   r_pcre  70.8115  71.2062  71.8814  71.410  71.5560  89.8478   100</span>
<span class="c1">##  r_fixed  23.7709  23.9305  24.0572  24.061  24.1899  24.3638   100</span>
</pre></div>
</div>
<p><strong>Different Default Arguments and Greater Configurability.</strong>
Some functions in <em>stringi</em> have different, more natural default
arguments, e.g., <code class="docutils literal notranslate"><span class="pre">paste()</span></code> has <code class="docutils literal notranslate"><span class="pre">sep=&quot;</span> <span class="pre">&quot;</span></code> but <code class="docutils literal notranslate"><span class="pre">stri_join()</span></code> has <code class="docutils literal notranslate"><span class="pre">sep=&quot;&quot;</span></code>.
Also, as there is no one-fits-all solution to all problems, many
arguments have been introduced for more detailed tuning.</p>
<p><strong>Preserving Attributes.</strong>
Generally, <em>stringi</em> preserves no object attributes whatsoever, but a
user can make sure themself that this is the case, e.g., by
calling “<code class="docutils literal notranslate"><span class="pre">x[]</span> <span class="pre">&lt;-</span> <span class="pre">stri_...(x,</span> <span class="pre">...)</span></code>” or
“`<code class="docutils literal notranslate"><span class="pre">attributes&lt;-</span></code>`<code class="docutils literal notranslate"><span class="pre">(stri_...(x,</span> <span class="pre">...),</span> <span class="pre">attributes(x))</span></code>”.</p>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footstringr" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">1</a><span class="fn-bracket">]</span></span>
<p>Interestingly, in 2015 the aforementioned
<em>stringr</em> package was rewritten as a set of wrappers around some of
the <em>stringi</em> functions instead of the base R ones. In Section 14.7 of
<em>R for Data Science</em> <span id="id7">[<a class="reference internal" href="../z_bibliography.html#id11" title="Wickham, H., Çetinkaya-Rundel, M., and Grolemund, G. (2023).  R for Data Science. O'Reilly. URL: https://r4ds.hadley.nz/.">12</a>]</span> we read:
“<em>stringr</em> is useful when you’re learning because it exposes a minimal
set of functions, which have been carefully picked to handle the most
common string manipulation functions. <em>stringi</em>, on the other hand, is
designed to be comprehensive. It contains almost every function you
might ever need: <em>stringi</em> has 250 functions to <em>stringr</em>’s 49”.</p>
</aside>
<aside class="footnote brackets" id="footstringx" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">2</a><span class="fn-bracket">]</span></span>
<p>See also the new
<a class="reference external" href="https://stringx.gagolewski.com"><em>stringx</em></a> package
which supplies a set of portable and efficient
replacements for and enhancements of the base R functions
(based on <em>stringi</em>).</p>
</aside>
</aside>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="basic_operations.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Basic String Operations</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../install.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installing <em>stringi</em></div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
              
              
              Copyright &#169; 2013–2023 by <a href="https://www.gagolewski.com">Marek Gagolewski</a>.
              Some rights reserved. Licensed under <a href='https://creativecommons.org/licenses/by-nc-nd/4.0/'>CC BY-NC-ND 4.0</a>.
              Built with <a href="https://sphinx-doc.org/">Sphinx</a>
              and a customised <a href="https://github.com/pradyunsg/furo">Furo</a> theme.
              Last updated on 2023-11-14T08:45:22+1100.
              This site will never display any ads: it is a non-profit project.
              It does not collect any data.
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            In this section
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">General Design Principles</a><ul>
<li><a class="reference internal" href="#naming">Naming</a></li>
<li><a class="reference internal" href="#vectorisation">Vectorisation</a></li>
<li><a class="reference internal" href="#acting-elementwise-with-recycling">Acting Elementwise with Recycling</a></li>
<li><a class="reference internal" href="#missing-values">Missing Values</a></li>
<li><a class="reference internal" href="#data-flow">Data Flow</a></li>
<li><a class="reference internal" href="#further-deviations-from-base-r">Further Deviations from Base R</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=1166ed6b"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    </body>
</html>